<!DOCTYPE html>

<html lang="en">



<style>
.reg{
text-align: center;
}
.inf{
    text-align: center;
    margin: 10px;
    
  vertical-align: bottom;
  margin-bottom: 5px;

}

body {
  background-image: linear-gradient(120deg, #84fab0 0%, #8fd3f4 100%);
}

.container {
  height: 200px;
  position: relative;
  border: 5px solid whitesmoke;
}

.vertical-center {
  margin: 0;
  position: absolute;
  top: 50%;
  -ms-transform: translateY(-50%);
  transform: translateY(-50%);
}
</style>



<head>
    <title>Login Page</title>
    <div class = reg>
        <h1 class="display-1">Login</h1>
    </div>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    
</head>

<body>
    <div class="container">
    <div class="vertical-center">
    <div class="form-floating mb-3">
        <input type="username" class="form-control" name="q" id="usernameInput" placeholder="username">
        <label for="usernameInput">Username</label>
      </div>
      <div class="form-floating">
        <input type="password" class="form-control" name = "p" id="passwordInput" placeholder="Password">
        <label for="passwordInput">Password</label>
      </div>

      
      <button type="submit" onclick="registerUser()" name = "button" class="btn btn-success" style="margin-top: 10px;" value="Login">Login
      </button>
    </div>
    </div>





    

</body>

<script>
    


    async function registerUser() {
        
        let usernameValue = document.getElementById("usernameInput").value;
        let passwordValue = document.getElementById("passwordInput").value;
        


        const headers = new Headers();
        headers.set('Authorization', (usernameValue + ":" + passwordValue)); // 'Basic ' has a space after it!
        const url = `http://localhost:7000/login`;
        const httpResponse  = await fetch(url, {headers: headers})
        if (httpResponse.status === 200)
        { 
        const body = await httpResponse.json();
      

          console.log(body);


          sessionStorage.setItem("id", body.id);

           window.location.href = "Menu.html";
        }
        else if(httpResponse.status === 205){
          document.getElementById("usernameInput").value = null; 
          document.getElementById("passwordInput").value = null;
          alert("Incorrect Login");
        }
        
        
        
    

       
       

    }

</script>

</html>
